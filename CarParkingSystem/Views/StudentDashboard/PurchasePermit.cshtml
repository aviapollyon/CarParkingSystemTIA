@model IEnumerable<CarParkingSystem.Models.Permit>
@{
    ViewData["Title"] = "Purchase Parking Permit";
}

<div class="admin-other-form">
    <div class="mb-2 text-center">
        <a class="tbl-btn" style="text-decoration:none" asp-action="ObtainPermit" asp-controller="StudentDashboard">Obtain Permit</a>
    </div>
    <div class="table-card">
        <h6 class="table-heading">Your Parking Permit</h6>
        <table class="table table-sm rana-form-table staff-table">
            <thead>
                <tr>
                    <th>Org Number</th>
                    <th>Plate Number</th>
                    <th>Expiry</th>
                    <th>QR Code</th>
                    <th>Download</th>
                </tr>
            </thead>
            <tbody>
                @if (Model.Any())
                {
                    @foreach (var item in Model)
                    {
                        <tr>
                            <td>@item.OrgNum</td>
                            <td>@item.regPlateNum</td>
                            <td>@item.ExpDate.ToString("MM/dd/yyyy")</td>
                            <td> <img src="@item.QRCodeImage" style="height:100px; width:100px" class="img-thumbnail" /></td>
                            <td>
                                <a class="tbl-btn" style="text-decoration:none" asp-action="DownloadQRCode" asp-route-imageUrl="@item.DownloadPath">Download</a>
                            </td>
                        </tr>
                    }

                }
                else
                {
                    <tr>
                        <td colspan="5"><h5 class="text-center">Record not found</h5></td>
                    </tr>
                }


            </tbody>
        </table>
    </div>
</div>
